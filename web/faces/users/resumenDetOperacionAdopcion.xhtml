<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">        
    <h:body>
        <ui:composition template="/resources/template.xhtml">
            
            <ui:define name="top">
                <h:form id="top_id">
                <h1>..:: Estadísticas MTE ::..</h1>
                <div align="right" style="color: #fff; font-size: 11px; padding-right: 10px">
                    Bienvenido (a): #{loginBean.nombre}<br/>
                    <h:commandLink action="#{loginBean.logout()}" value="Cerrar sesi&oacute;n" style="color: #fff; font-size: 9px;"/>
                </div>
                </h:form>
            </ui:define>
            
            <ui:define name="content">
                <h:form id="form1">
                    <p:menubar style="font-size: 10px;">
                        <p:menuitem value="Validaci&oacute;n |" url="/faces/users/menu.jsf" />
                        <p:menuitem value="N&uacute;mero de Operciones |" url="/faces/users/numOperacion.jsf" />
                        <p:menuitem value="Detalle de Operaciones |" url="/faces/users/detOperacion.jsf" />
                        <p:submenu label="Adopci&oacute;n">
                            <p:menuitem value="General" url="/faces/users/adopcion.jsf" />
                            <p:menuitem value="Detalle" url="/faces/users/detalle_adopcion.jsf" />     
                        </p:submenu>
                        <p:menuitem value="| Detalle de Razones Sociales |" url="/faces/users/detalleRS.jsf" />
                        <p:menuitem value="Detalle Operaciones y Adopci&oacute;n |" url="/faces/users/resumenDetOperacionAdopcion.jsf" />
                        <p:menuitem value="Anal&iacute;ticos " url="/faces/users/analiticos.jsf" />
                    </p:menubar>
                    <br/>
                    <br/>                    
                    <p:fieldset legend="Filtros" style="margin-bottom:20px">
                        <p:messages id="msg" showDetail="true" closable="true"/>
                        <h:panelGrid columns="7" cellpadding="15" cellspacing="3">
                            <h:outputText value="Año:"/>
                            <p:selectOneMenu id="anio" value="#{py_resumenDetOpeAdopcionBean.idSeleccionadoAnio}" style="width:125px">
                                <f:selectItem itemLabel="--Seleccione--" itemValue="0" />
                                <f:selectItems value="#{py_resumenDetOpeAdopcionBean.lista_anio}" />
                            </p:selectOneMenu>    
                            <h:outputText value="Mes:"/>
                            <p:selectOneMenu id="mes" value="#{py_resumenDetOpeAdopcionBean.idSeleccionadoMes}" style="width:125px">
                                <f:selectItem itemLabel="--Seleccione--" itemValue="0" />
                                <f:selectItems value="#{py_resumenDetOpeAdopcionBean.lista_mes}" />
                            </p:selectOneMenu>                            
                            <h:outputText value="Per&iacute;odo:"/>
                            <p:selectOneMenu id="quincena" value="#{py_resumenDetOpeAdopcionBean.idSeleccionadoQuincena}" style="width:135px">
                                <f:selectItem itemLabel="Quincenal" itemValue="1" />
                                <f:selectItem itemLabel="Mensual" itemValue="2" />
                            </p:selectOneMenu>
                            <p:commandButton value="Continuar" update="msg, tableNumOperacionesAdopcion" actionListener="#{py_resumenDetOpeAdopcionBean.operacionFiltro()}" icon="ui-icon-search" title="Continuar" /> 
                        </h:panelGrid> 
                    </p:fieldset>
                        
                    <p:dataTable id="tableNumOperacionesAdopcion"
                   var="numOpeAdo" value="#{py_resumenDetOpeAdopcionBean.lista_resumen}"
                   scrollable="false" 
                   emptyMessage="No hay registros a mostrar" 
                   paginator="true" rows="50"  
                   paginatorPosition="bottom" 
                   rowsPerPageTemplate="50,100"
                   selectionMode="single" rowKey="#{rowIndex}"
                   rowIndexVar="rowIndex"
                   paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                   currentPageReportTemplate="{currentPage} de {totalPages} ({totalRecords} registros)" >
                        <f:facet name="header">
                            <div align="center" style="font-size: 14px"> Resumen Detalle de Operaciones y Adopci&oacute;n</div> 
                            <div align="right">
                            <h:commandLink style="text-align: right" >
                                <p:graphicImage name="/imagen/excel.png" width="24"/>
                                <p:dataExporter type="xls" target="tableNumOperacionesAdopcion" postProcessor="#{py_resumenDetOpeAdopcionBean.exporter_postProcessXLS}"
                                                fileName="resumenDetalleOperacionesAdopcion_#{py_resumenDetOpeAdopcionBean.idSeleccionadoMes}" />
                            </h:commandLink>
                            </div>
                        </f:facet>
                        
                        <p:column>
                            <f:facet name="header"><h:outputText value="Registro" /></f:facet>
                            <h:outputText value="#{rowIndex+1}" />    
                        </p:column> 
                        <p:column>
                            <f:facet name="header"><h:outputText value="Alias" /></f:facet>
                            <h:outputText value="#{numOpeAdo[0]}" />  
                        </p:column> 
                        <p:column>
                            <f:facet name="header"><h:outputText value="Total Operaciones" /></f:facet>
                            <h:outputText value="#{numOpeAdo[1]}" style="float:right">
                            <f:convertNumber type="number" locale="en_US" />
                            </h:outputText>  
                        </p:column> 
                        <p:column>  
                            <f:facet name="header"><h:outputText value="Total RS" /></f:facet>
                            <h:outputText value="#{numOpeAdo[2]}" style="float:right">
                                <f:convertNumber type="number" locale="en_US" />
                            </h:outputText>  
                        </p:column> 
                        
                    </p:dataTable>                              
                </h:form>
            </ui:define>
        </ui:composition>    
    </h:body>
</html>



